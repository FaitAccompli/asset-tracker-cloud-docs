

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Versioning &mdash; nRF Asset Tracker 728d262264c249e2a6e6da92fe714bb35c8f4479 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/common.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="direnv" href="Direnv.html" />
    <link rel="prev" title="Cyber security for consumer Internet of Things: baseline requirements" href="ETSI-EN-303-645.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> nRF Asset Tracker
          

          
          </a>

          
            
            
              <div class="version">
                saga
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project/Index.html">Project Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws/Index.html">AWS cloud components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../azure/Index.html">Azure cloud components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../app/Index.html">Cat Tracker web application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../firmware/Index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devices/Index.html">Connect using a real device</a></li>
</ul>
<p class="caption"><span class="caption-text">Resources</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Index.html">Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="FourKindsOfData.html">Four kinds of data</a></li>
<li class="toctree-l2"><a class="reference internal" href="AutomateHEXFileBuilding.html">Automate building of HEX files for your nRF Connect SDK application</a></li>
<li class="toctree-l2"><a class="reference internal" href="CellGeolocations.html">Cell geolocations</a></li>
<li class="toctree-l2"><a class="reference internal" href="Cloud-connectivity-and-protocols-for-the-Internet-of-Things.html">Cloud connectivity and protocols for the Internet of Things</a></li>
<li class="toctree-l2"><a class="reference internal" href="CloudDifferences.html">Cloud differences</a></li>
<li class="toctree-l2"><a class="reference internal" href="ETSI-EN-303-645.html">Cyber security for consumer Internet of Things: baseline requirements</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="Direnv.html">direnv</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/search?q=org%3ANordicSemiconductor+nrf-asset-tracker&amp;type=repositories">GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adr/README.html">Architecture Decision Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CODE_OF_CONDUCT.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING.html">Contributing to the project</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">nRF Asset Tracker</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="Index.html">Guides</a> &raquo;</li>
        
      <li>Versioning</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/NordicSemiconductor/asset-tracker-cloud-docs/blob/saga/docs/guides/Versioning.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="versioning">
<span id="id1"></span><h1>Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#releasing-a-new-version-of-a-package" id="id2">Releasing a new version of a package</a></p>
<ul>
<li><p><a class="reference internal" href="#patch-release-fix-2-3-4-2-3-5" id="id3">Patch release (<code class="docutils literal notranslate"><span class="pre">fix</span></code>) <code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">2.3.5</span></code></a></p></li>
<li><p><a class="reference internal" href="#feature-release-feat-2-3-4-2-4-0" id="id4">Feature release (<code class="docutils literal notranslate"><span class="pre">feat</span></code>) <code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">2.4.0</span></code></a></p></li>
<li><p><a class="reference internal" href="#breaking-release-breaking-change-2-3-4-3-0-0" id="id5">Breaking Release (<code class="docutils literal notranslate"><span class="pre">BREAKING</span> <span class="pre">CHANGE:</span></code>) <code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">3.0.0</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#typical-changes" id="id6">Typical changes</a></p>
<ul>
<li><p><a class="reference internal" href="#updating-the-dependencies" id="id7">Updating the dependencies</a></p></li>
<li><p><a class="reference internal" href="#refactoring" id="id8">Refactoring</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#publishing-the-releases" id="id9">Publishing the releases</a></p></li>
</ul>
</div>
<p>The <a class="reference external" href="https://github.com/semantic-release/semantic-release">semantic-release</a> tool is used to automatically determine the next version of the project and publish a release in the GitHub project as well as release it to the <code class="docutils literal notranslate"><span class="pre">&#64;NordicSemiconductor</span></code> npm organization .</p>
<p>The next version is determined by scanning the commit messages.
The commit messages must follow the <a class="reference external" href="https://github.com/semantic-release/semantic-release#commit-message-format">Angular commit message rules</a>, and in every library <a class="reference external" href="https://github.com/marionebl/commitlint">a hook</a> will check the commit messages against these rules.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">package.json</span></code> of a project must contain only <code class="docutils literal notranslate"><span class="pre">0.0.0-development</span></code> as  the <code class="docutils literal notranslate"><span class="pre">version</span></code> property.
Semantic-release will ignore the value.
Only the published package on npm will contain the correct version number.</p>
</div>
<div class="section" id="releasing-a-new-version-of-a-package">
<span id="guides-versionining-how-to-release-a-new-version-of-a-package"></span><h2><a class="toc-backref" href="#id2">Releasing a new version of a package</a><a class="headerlink" href="#releasing-a-new-version-of-a-package" title="Permalink to this headline">¶</a></h2>
<p>Consider the example of a library, which has the npm version <code class="docutils literal notranslate"><span class="pre">2.3.4</span></code>.</p>
<p>A new version will be published by the respective project’s CI run.
Use the commit messages that follow the <a class="reference external" href="https://github.com/semantic-release/semantic-release#commit-message-format">schema for the commit message</a>.</p>
<p>Following are the three commit messages that triggers a release:</p>
<ul>
<li><p>Patch release</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>fix: &lt;commit message&gt;
</pre></div>
</div>
</li>
<li><p>Feature release</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>feat: &lt;commit message&gt;
</pre></div>
</div>
</li>
<li><p>Breaking Release</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;scope&gt;: &lt;commit message&gt;

BREAKING CHANGE:

&lt;description of breaking change&gt;
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A commit message of a different format <em>will not trigger</em> a release.</p>
</div>
<div class="section" id="patch-release-fix-2-3-4-2-3-5">
<h3><a class="toc-backref" href="#id3">Patch release (<code class="docutils literal notranslate"><span class="pre">fix</span></code>) <code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">2.3.5</span></code></a><a class="headerlink" href="#patch-release-fix-2-3-4-2-3-5" title="Permalink to this headline">¶</a></h3>
<p>A fix is a change to the implementation, which removes a bug <em>without changing the public API</em> (method names and signatures, exports) of the library.
The consumer of the library need not change their implementation when installing the fixed version.</p>
<p>To release a fix (which will update the version from <code class="docutils literal notranslate"><span class="pre">2.3.4</span></code> to <code class="docutils literal notranslate"><span class="pre">2.3.5</span></code>), use the type <code class="docutils literal notranslate"><span class="pre">fix</span></code> in the commit message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>fix: &lt;commit message&gt;
</pre></div>
</div>
<p>You can optionally add a scope, which is a lowercase string that is used to identify the affected <em>component</em>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>fix<span class="o">(</span>&lt;scope&gt;<span class="o">)</span>: &lt;commit message&gt;
</pre></div>
</div>
<p>Scopes are useful when the project is big.</p>
</div>
<div class="section" id="feature-release-feat-2-3-4-2-4-0">
<h3><a class="toc-backref" href="#id4">Feature release (<code class="docutils literal notranslate"><span class="pre">feat</span></code>) <code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">2.4.0</span></code></a><a class="headerlink" href="#feature-release-feat-2-3-4-2-4-0" title="Permalink to this headline">¶</a></h3>
<p>A feature is a change to the implementation of a library which adds additional functionality <em>without changing the public API</em> of the library.</p>
<p>You may add new exports, methods and extra method arguments that are optional, but the consumer of the library need not change their implementation when installing the library with the new feature.</p>
<p>To release a feature (which will update the version from <code class="docutils literal notranslate"><span class="pre">2.3.4</span></code> to <code class="docutils literal notranslate"><span class="pre">2.4.0</span></code>), use the type <code class="docutils literal notranslate"><span class="pre">feat</span></code> in the commit message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>feat: &lt;commit message&gt;
</pre></div>
</div>
<p>You can optionally add a scope as well.</p>
</div>
<div class="section" id="breaking-release-breaking-change-2-3-4-3-0-0">
<h3><a class="toc-backref" href="#id5">Breaking Release (<code class="docutils literal notranslate"><span class="pre">BREAKING</span> <span class="pre">CHANGE:</span></code>) <code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">3.0.0</span></code></a><a class="headerlink" href="#breaking-release-breaking-change-2-3-4-3-0-0" title="Permalink to this headline">¶</a></h3>
<p>Whenever the public API of the library changes in a way that requires the consumer to update their implementation, <em>you must mark the change as breaking</em>.
This can happen in the following conditions:</p>
<ul class="simple">
<li><p>Method names and arguments are renamed</p></li>
<li><p>Previously optional arguments become mandatory</p></li>
<li><p>Arguments are removed</p></li>
<li><p>Classes are renamed</p></li>
</ul>
<p>Even if the change is very small, as soon as you break the library’s <em>contract</em> (its public API), it is a breaking change according to <a class="reference external" href="https://semver.org/#spec-item-8">Semantic Versioning 2.0.0</a>.</p>
<p>To do a breaking release (which will update the version from <code class="docutils literal notranslate"><span class="pre">2.3.4</span></code> to <code class="docutils literal notranslate"><span class="pre">3.0.0</span></code>), use the text <code class="code docutils literal notranslate"><span class="pre">BREAKING</span> <span class="pre">CHANGE:</span></code> (followed by a space of two new lines) in the commit message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>refactor: &lt;commit message&gt;

BREAKING CHANGE:

&lt;description of breaking change&gt;
</pre></div>
</div>
<p>You can optionally add a scope as well.</p>
<p>Note that in the case of a breaking release, the message type (<code class="docutils literal notranslate"><span class="pre">refactor</span></code> in the example) can be any valid type.</p>
</div>
</div>
<div class="section" id="typical-changes">
<h2><a class="toc-backref" href="#id6">Typical changes</a><a class="headerlink" href="#typical-changes" title="Permalink to this headline">¶</a></h2>
<p>Some of the typical changes that you make on the repository are updating the dependencies or refactoring.</p>
<div class="section" id="updating-the-dependencies">
<h3><a class="toc-backref" href="#id7">Updating the dependencies</a><a class="headerlink" href="#updating-the-dependencies" title="Permalink to this headline">¶</a></h3>
<p>If you are manually updating the dependencies in a library, you must commit the change as a fix, so that the consumers also use the updated dependencies.</p>
</div>
<div class="section" id="refactoring">
<h3><a class="toc-backref" href="#id8">Refactoring</a><a class="headerlink" href="#refactoring" title="Permalink to this headline">¶</a></h3>
<p>If you perform a pure refactoring of a library without changing the features and the public API and if you require the refactored version in your consumers, commit the refactoring as a feature.
In this case you are improving the library, which qualifies as a feature.
For example, a performance improvement can be a feature.</p>
</div>
</div>
<div class="section" id="publishing-the-releases">
<h2><a class="toc-backref" href="#id9">Publishing the releases</a><a class="headerlink" href="#publishing-the-releases" title="Permalink to this headline">¶</a></h2>
<p>After you have pushed your changes to the remote repository, a job will be run on the CI runner.
If the job completes successfully (for example, if all the tests pass and the linter does not report any errors), <code class="docutils literal notranslate"><span class="pre">semantic-release</span></code> will determine the next version to be released.</p>
<p>The <em>highest</em> commit takes <em>precedence</em> (<code class="docutils literal notranslate"><span class="pre">fix</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">feat</span></code> &gt; <code class="docutils literal notranslate"><span class="pre">breaking</span> <span class="pre">change</span></code>).
This means that if the list of commit messages since the last release contains <em>only</em> fixes, the patch version will be incremented (<code class="code docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">2.3.5</span></code>).
If the list of commits contains at least one new feature, then the minor version will be incremented and the patch version will be set to <code class="docutils literal notranslate"><span class="pre">0</span></code> (<code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">2.4.0</span></code>).
If the list of commits contains at least one breaking change, then the major version will be incremented, and the minor and patch versions will be set to <code class="docutils literal notranslate"><span class="pre">0</span></code> (<code class="docutils literal notranslate"><span class="pre">2.3.4</span> <span class="pre">-&gt;</span> <span class="pre">3.0.0</span></code>).</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Direnv.html" class="btn btn-neutral float-right" title="direnv" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="ETSI-EN-303-645.html" class="btn btn-neutral float-left" title="Cyber security for consumer Internet of Things: baseline requirements" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019-2021, Nordic Semiconductor ASA | nordicsemi.no.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>